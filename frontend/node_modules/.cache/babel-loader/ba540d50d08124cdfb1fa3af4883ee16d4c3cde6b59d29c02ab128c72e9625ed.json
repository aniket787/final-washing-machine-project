{"ast":null,"code":"var _jsxFileName = \"/Users/aniketgaikwad011110/Projects/Wash_Machine/project-wash/frontend/src/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n  const [machines, setMachines] = useState([]);\n  const [users, setUsers] = useState([{\n    id: 1,\n    name: \"User1\"\n  }]);\n  const [currentUserId, setCurrentUserId] = useState(1);\n  const wsRef = useRef(null);\n  const intervalRef = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n  useEffect(() => {\n    connectWebSocket();\n    fetchMachines();\n\n    // Auto-refresh remaining time every second\n    intervalRef.current = setInterval(() => {\n      setMachines(prev => [...prev]);\n    }, 1000);\n\n    // Request notification permission\n    if (typeof Notification !== \"undefined\" && Notification.permission === \"default\") {\n      Notification.requestPermission();\n    }\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n    };\n  }, []);\n  function connectWebSocket() {\n    try {\n      const ws = new WebSocket(\"ws://localhost:8080/ws\");\n      ws.onopen = () => {\n        console.log(\"WebSocket connected\");\n        ws.send(\"CONNECT\\naccept-version:1.0,1.1,2.0\\n\\n\\0\");\n      };\n      ws.onmessage = event => {\n        const message = event.data;\n        if (message.startsWith(\"CONNECTED\")) {\n          console.log(\"STOMP connected\");\n          ws.send(\"SUBSCRIBE\\nid:sub-0\\ndestination:/topic/machines\\n\\n\\0\");\n          ws.send(\"SUBSCRIBE\\nid:sub-1\\ndestination:/topic/notifications\\n\\n\\0\");\n          return;\n        }\n        if (message.startsWith(\"MESSAGE\")) {\n          try {\n            const lines = message.split('\\n');\n            let destination = '';\n            let bodyStartIndex = -1;\n            for (let i = 0; i < lines.length; i++) {\n              if (lines[i].startsWith('destination:')) {\n                destination = lines[i].substring(12);\n              }\n              if (lines[i] === '') {\n                bodyStartIndex = i + 1;\n                break;\n              }\n            }\n            if (bodyStartIndex > -1) {\n              const body = lines.slice(bodyStartIndex).join('\\n').replace(/\\0$/, '');\n              const data = JSON.parse(body);\n              if (destination === '/topic/machines') {\n                setMachines(data);\n              } else if (destination === '/topic/notifications') {\n                handleNotification(data);\n              }\n            }\n          } catch (e) {\n            console.error(\"Error parsing message:\", e);\n          }\n        }\n      };\n      ws.onerror = error => {\n        console.error(\"WebSocket error:\", error);\n      };\n      ws.onclose = () => {\n        console.log(\"WebSocket closed. Reconnecting...\");\n        reconnectTimeoutRef.current = setTimeout(() => {\n          connectWebSocket();\n        }, 5000);\n      };\n      wsRef.current = ws;\n    } catch (error) {\n      console.error(\"Error connecting WebSocket:\", error);\n      reconnectTimeoutRef.current = setTimeout(() => {\n        connectWebSocket();\n      }, 5000);\n    }\n  }\n  function fetchMachines() {\n    fetch(\"http://localhost:8080/api/machines\").then(r => {\n      if (!r.ok) throw new Error('Network response was not ok');\n      return r.json();\n    }).then(data => setMachines(data)).catch(e => console.error(\"fetch machines\", e));\n  }\n  function remainingSeconds(endTime) {\n    if (!endTime) return 0;\n    const diff = Math.floor(new Date(endTime).getTime() / 1000 - Date.now() / 1000);\n    return diff > 0 ? diff : 0;\n  }\n  function fmtSeconds(totalSec) {\n    if (totalSec <= 0) return \"0m 0s\";\n    const mins = Math.floor(totalSec / 60);\n    const secs = totalSec % 60;\n    return `${mins}m ${secs}s`;\n  }\n  function handleNotification(payload) {\n    if (!payload || payload.type !== \"PRE_NOTIFY\") return;\n    if (Number(payload.userId) !== Number(currentUserId)) return;\n    const mins = payload.minutesUntilStart;\n    const machineName = payload.machineName || `Machine ${payload.machineId}`;\n    alert(`🔔 Hey! Your turn on ${machineName} will start in about ${mins} minute(s). Get ready!`);\n    if (typeof Notification !== \"undefined\" && Notification.permission === \"granted\") {\n      new Notification(\"WashSimple\", {\n        body: `Your turn on ${machineName} starts in ${mins} minute(s)!`,\n        icon: \"🔔\"\n      });\n    }\n  }\n  function addNewUser() {\n    const name = prompt(\"Enter new username:\");\n    if (!name || !name.trim()) return;\n    if (users.some(u => u.name === name.trim())) {\n      alert(\"Username already exists!\");\n      return;\n    }\n    const id = Date.now();\n    setUsers(prev => [...prev, {\n      id,\n      name: name.trim()\n    }]);\n    setCurrentUserId(id);\n  }\n  function totalRemainingSecondsForMachine(m) {\n    var _m$queue;\n    let total = 0;\n    if (m.inUse && m.endTime) total += remainingSeconds(m.endTime);\n    if ((_m$queue = m.queue) !== null && _m$queue !== void 0 && _m$queue.length) {\n      m.queue.forEach(q => {\n        total += (q.minutes || 50) * 60;\n      });\n    }\n    return total;\n  }\n  function remainingSecondsForUser(m, userId) {\n    var _m$queue2;\n    let total = 0;\n    if (m.inUse && Number(m.currentUserId) === Number(userId)) {\n      return remainingSeconds(m.endTime);\n    }\n    if (m.inUse && m.endTime) {\n      total += remainingSeconds(m.endTime);\n    }\n    if ((_m$queue2 = m.queue) !== null && _m$queue2 !== void 0 && _m$queue2.length) {\n      for (let q of m.queue) {\n        if (Number(q.userId) === Number(userId)) break;\n        total += (q.minutes || 50) * 60;\n      }\n    }\n    return total;\n  }\n  function getCurrentUserQueues() {\n    // If currentUserId doesn't exist in any machine data, return empty\n    const userExistsInMachines = machines.some(m => Number(m.currentUserId) === Number(currentUserId) || m.queue && m.queue.some(q => Number(q.userId) === Number(currentUserId)));\n    if (!userExistsInMachines) {\n      return [];\n    }\n    const userQueues = machines.filter(m => {\n      const isCurrentUser = Number(m.currentUserId) === Number(currentUserId);\n      const isInQueue = m.queue && m.queue.some(q => Number(q.userId) === Number(currentUserId));\n      return isCurrentUser || isInQueue;\n    });\n    return userQueues;\n  }\n  async function joinQueue(machineId) {\n    var _machine$queue, _machine$queue2;\n    const machine = machines.find(m => m.id === machineId);\n    if (!machine) return;\n    const userInAnyMachine = machines.some(mm => Number(mm.currentUserId) === Number(currentUserId) || mm.queue && mm.queue.some(q => Number(q.userId) === Number(currentUserId)));\n    if (userInAnyMachine) {\n      alert(\"You are already using or queued for another machine.\");\n      return;\n    }\n    const minutesStr = prompt(\"Enter your wash duration (minutes):\", \"50\");\n    if (!minutesStr) return;\n    const minutes = parseInt(minutesStr, 10);\n    if (isNaN(minutes) || minutes <= 0) {\n      alert(\"Please enter a valid number of minutes.\");\n      return;\n    }\n    let totalWaitSec = 0;\n    if (machine.inUse && machine.endTime) totalWaitSec += remainingSeconds(machine.endTime);\n    (_machine$queue = machine.queue) === null || _machine$queue === void 0 ? void 0 : _machine$queue.forEach(q => totalWaitSec += (q.minutes || 50) * 60);\n    const ok = window.confirm(`Machine: ${machine.name}\\n` + `Current queue: ${((_machine$queue2 = machine.queue) === null || _machine$queue2 === void 0 ? void 0 : _machine$queue2.length) || 0} user(s)\\n` + `Estimated wait: ${Math.ceil(totalWaitSec / 60)} minutes\\n\\n` + `Join queue?`);\n    if (!ok) return;\n    try {\n      const res = await fetch(\"http://localhost:8080/api/machines/join\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          machineId,\n          userId: currentUserId,\n          minutes\n        })\n      });\n      if (!res.ok) throw new Error('Failed to join queue');\n      const j = await res.json();\n      if (j.error) {\n        alert(j.error);\n      } else {\n        alert(`Joined queue. Position: ${j.position}. You will be notified 2 minutes before your turn.`);\n        fetchMachines();\n      }\n    } catch (error) {\n      console.error(\"Error joining queue:\", error);\n      alert(\"Failed to join queue. Please try again.\");\n    }\n  }\n  async function startWashing(machineId) {\n    const machine = machines.find(m => m.id === machineId);\n    if (!machine) return;\n    const minutesStr = prompt(\"Enter minutes for wash:\", \"50\");\n    if (!minutesStr) return;\n    const minutes = parseInt(minutesStr, 10);\n    if (isNaN(minutes) || minutes <= 0) {\n      alert(\"Please enter a valid number of minutes.\");\n      return;\n    }\n    try {\n      const res = await fetch(\"http://localhost:8080/api/machines/start\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          machineId,\n          userId: currentUserId,\n          minutes\n        })\n      });\n      if (!res.ok) throw new Error('Failed to start washing');\n      const j = await res.json();\n      if (j.error) {\n        alert(j.error);\n      } else if (j.started) {\n        alert(\"Started: ends at \" + j.endTime);\n        fetchMachines();\n      }\n    } catch (error) {\n      console.error(\"Error starting wash:\", error);\n      alert(\"Failed to start washing. Please try again.\");\n    }\n  }\n  const currentUserQueues = getCurrentUserQueues();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"header-title-icon\",\n              children: \"\\uD83D\\uDCA7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"WashSimple\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"header-controls-icon\",\n              children: \"\\uD83D\\uDC64\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"user-select\",\n              value: currentUserId,\n              onChange: e => setCurrentUserId(Number(e.target.value)),\n              children: users.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: u.id,\n                children: u.name\n              }, u.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"add-user-btn\",\n              onClick: addNewUser,\n              children: \"\\u2795 Add User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), currentUserQueues.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"active-sessions\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"active-sessions-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"active-sessions-label-icon\",\n              children: \"\\uD83D\\uDD14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Your Active Sessions:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), currentUserQueues.map(m => {\n            var _m$queue3;\n            const waitSec = remainingSecondsForUser(m, currentUserId);\n            const isWashing = Number(m.currentUserId) === Number(currentUserId) && m.inUse;\n            const queueIndex = (_m$queue3 = m.queue) === null || _m$queue3 === void 0 ? void 0 : _m$queue3.findIndex(q => Number(q.userId) === Number(currentUserId));\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: isWashing ? \"session-card session-card-washing\" : \"session-card session-card-queued\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: m.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"session-card-details\",\n                children: isWashing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"\\uD83D\\uDD04 Washing \\u2022 \", fmtSeconds(waitSec), \" left\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"\\u23F3 Position \", queueIndex + 1, \" \\u2022 ~\", Math.ceil(waitSec / 60), \" min wait\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 21\n              }, this)]\n            }, m.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-sessions\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"no-sessions-icon\",\n            children: \"\\u2139\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-sessions-text\",\n            children: \"You have no active sessions. Join a queue or start washing!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"machine-grid\",\n          children: machines.map(m => {\n            var _m$queue4;\n            const totalSec = totalRemainingSecondsForMachine(m);\n            const occupied = totalSec > 0;\n            const isOwner = Number(m.currentUserId) === Number(currentUserId);\n            const userInAnyMachine = machines.some(mm => Number(mm.currentUserId) === Number(currentUserId) || mm.queue && mm.queue.some(q => Number(q.userId) === Number(currentUserId)));\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: isOwner ? \"card card-owner\" : \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: m.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"status-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: occupied ? \"status-indicator status-indicator-occupied\" : \"status-indicator status-indicator-available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: occupied ? \"Occupied\" : \"Available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"info-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-icon\",\n                    children: \"\\u23F0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Remaining: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: fmtSeconds(totalSec)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 40\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"info-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-icon\",\n                    children: \"\\uD83D\\uDC65\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Queue: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: ((_m$queue4 = m.queue) === null || _m$queue4 === void 0 ? void 0 : _m$queue4.length) || 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 397,\n                      columnNumber: 36\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-join-queue\",\n                  onClick: () => joinQueue(m.id),\n                  disabled: userInAnyMachine,\n                  children: \"Join Queue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-start\",\n                  onClick: () => startWashing(m.id),\n                  disabled: !isOwner && userInAnyMachine || m.inUse && !isOwner,\n                  children: isOwner ? \"Extend\" : \"Start\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this)]\n            }, m.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"queue-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"All Queues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), machines.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"queue-empty\",\n            children: \"No machines available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this) : machines.map(m => {\n            var _users$find, _m$queue5;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"queue-machine\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: m.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this), !m.inUse && (!m.queue || m.queue.length === 0) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"queue-no-users\",\n                children: \"No active users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"queue-details\",\n                children: [m.inUse && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"queue-current-user\",\n                  children: [\"\\uD83D\\uDD04 \", ((_users$find = users.find(u => u.id === m.currentUserId)) === null || _users$find === void 0 ? void 0 : _users$find.name) || `User${m.currentUserId}`, /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"queue-current-user-time\",\n                    children: [fmtSeconds(remainingSeconds(m.endTime)), \" remaining\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 25\n                }, this), (_m$queue5 = m.queue) === null || _m$queue5 === void 0 ? void 0 : _m$queue5.map((q, idx) => {\n                  var _users$find2;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"queue-item\",\n                    children: [\"#\", idx + 1, \" \", ((_users$find2 = users.find(u => u.id === q.userId)) === null || _users$find2 === void 0 ? void 0 : _users$find2.name) || `User${q.userId}`, /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"queue-item-time\",\n                      children: [q.minutes, \" min\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 27\n                    }, this)]\n                  }, q.userId, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 25\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, this)]\n            }, m.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 302,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"lfTYifY0KP4/98NjCBKvtGRGIf8=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","machines","setMachines","users","setUsers","id","name","currentUserId","setCurrentUserId","wsRef","intervalRef","reconnectTimeoutRef","connectWebSocket","fetchMachines","current","setInterval","prev","Notification","permission","requestPermission","close","clearInterval","clearTimeout","ws","WebSocket","onopen","console","log","send","onmessage","event","message","data","startsWith","lines","split","destination","bodyStartIndex","i","length","substring","body","slice","join","replace","JSON","parse","handleNotification","e","error","onerror","onclose","setTimeout","fetch","then","r","ok","Error","json","catch","remainingSeconds","endTime","diff","Math","floor","Date","getTime","now","fmtSeconds","totalSec","mins","secs","payload","type","Number","userId","minutesUntilStart","machineName","machineId","alert","icon","addNewUser","prompt","trim","some","u","totalRemainingSecondsForMachine","m","_m$queue","total","inUse","queue","forEach","q","minutes","remainingSecondsForUser","_m$queue2","getCurrentUserQueues","userExistsInMachines","userQueues","filter","isCurrentUser","isInQueue","joinQueue","_machine$queue","_machine$queue2","machine","find","userInAnyMachine","mm","minutesStr","parseInt","isNaN","totalWaitSec","window","confirm","ceil","res","method","headers","stringify","j","position","startWashing","started","currentUserQueues","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","map","onClick","_m$queue3","waitSec","isWashing","queueIndex","findIndex","_m$queue4","occupied","isOwner","disabled","_users$find","_m$queue5","idx","_users$find2","_c","$RefreshReg$"],"sources":["/Users/aniketgaikwad011110/Projects/Wash_Machine/project-wash/frontend/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport \"./App.css\";\n\nexport default function Dashboard() {\n  const [machines, setMachines] = useState([]);\n  const [users, setUsers] = useState([{ id: 1, name: \"User1\" }]);\n  const [currentUserId, setCurrentUserId] = useState(1);\n  const wsRef = useRef(null);\n  const intervalRef = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    connectWebSocket();\n    fetchMachines();\n\n    // Auto-refresh remaining time every second\n    intervalRef.current = setInterval(() => {\n      setMachines(prev => [...prev]);\n    }, 1000);\n\n    // Request notification permission\n    if (typeof Notification !== \"undefined\" && Notification.permission === \"default\") {\n      Notification.requestPermission();\n    }\n\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  function connectWebSocket() {\n    try {\n      const ws = new WebSocket(\"ws://localhost:8080/ws\");\n\n      ws.onopen = () => {\n        console.log(\"WebSocket connected\");\n        ws.send(\"CONNECT\\naccept-version:1.0,1.1,2.0\\n\\n\\0\");\n      };\n\n      ws.onmessage = (event) => {\n        const message = event.data;\n\n        if (message.startsWith(\"CONNECTED\")) {\n          console.log(\"STOMP connected\");\n          ws.send(\"SUBSCRIBE\\nid:sub-0\\ndestination:/topic/machines\\n\\n\\0\");\n          ws.send(\"SUBSCRIBE\\nid:sub-1\\ndestination:/topic/notifications\\n\\n\\0\");\n          return;\n        }\n\n        if (message.startsWith(\"MESSAGE\")) {\n          try {\n            const lines = message.split('\\n');\n            let destination = '';\n            let bodyStartIndex = -1;\n\n            for (let i = 0; i < lines.length; i++) {\n              if (lines[i].startsWith('destination:')) {\n                destination = lines[i].substring(12);\n              }\n              if (lines[i] === '') {\n                bodyStartIndex = i + 1;\n                break;\n              }\n            }\n\n            if (bodyStartIndex > -1) {\n              const body = lines.slice(bodyStartIndex).join('\\n').replace(/\\0$/, '');\n              const data = JSON.parse(body);\n\n              if (destination === '/topic/machines') {\n                setMachines(data);\n              } else if (destination === '/topic/notifications') {\n                handleNotification(data);\n              }\n            }\n          } catch (e) {\n            console.error(\"Error parsing message:\", e);\n          }\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n      };\n\n      ws.onclose = () => {\n        console.log(\"WebSocket closed. Reconnecting...\");\n        reconnectTimeoutRef.current = setTimeout(() => {\n          connectWebSocket();\n        }, 5000);\n      };\n\n      wsRef.current = ws;\n    } catch (error) {\n      console.error(\"Error connecting WebSocket:\", error);\n      reconnectTimeoutRef.current = setTimeout(() => {\n        connectWebSocket();\n      }, 5000);\n    }\n  }\n\n  function fetchMachines() {\n    fetch(\"http://localhost:8080/api/machines\")\n      .then((r) => {\n        if (!r.ok) throw new Error('Network response was not ok');\n        return r.json();\n      })\n      .then((data) => setMachines(data))\n      .catch((e) => console.error(\"fetch machines\", e));\n  }\n\n  function remainingSeconds(endTime) {\n    if (!endTime) return 0;\n    const diff = Math.floor(new Date(endTime).getTime() / 1000 - Date.now() / 1000);\n    return diff > 0 ? diff : 0;\n  }\n\n  function fmtSeconds(totalSec) {\n    if (totalSec <= 0) return \"0m 0s\";\n    const mins = Math.floor(totalSec / 60);\n    const secs = totalSec % 60;\n    return `${mins}m ${secs}s`;\n  }\n\n  function handleNotification(payload) {\n    if (!payload || payload.type !== \"PRE_NOTIFY\") return;\n    if (Number(payload.userId) !== Number(currentUserId)) return;\n\n    const mins = payload.minutesUntilStart;\n    const machineName = payload.machineName || `Machine ${payload.machineId}`;\n\n    alert(`🔔 Hey! Your turn on ${machineName} will start in about ${mins} minute(s). Get ready!`);\n\n    if (typeof Notification !== \"undefined\" && Notification.permission === \"granted\") {\n      new Notification(\"WashSimple\", {\n        body: `Your turn on ${machineName} starts in ${mins} minute(s)!`,\n        icon: \"🔔\"\n      });\n    }\n  }\n\n  function addNewUser() {\n    const name = prompt(\"Enter new username:\");\n    if (!name || !name.trim()) return;\n    if (users.some(u => u.name === name.trim())) {\n      alert(\"Username already exists!\");\n      return;\n    }\n    const id = Date.now();\n    setUsers(prev => [...prev, { id, name: name.trim() }]);\n    setCurrentUserId(id);\n  }\n\n  function totalRemainingSecondsForMachine(m) {\n    let total = 0;\n    if (m.inUse && m.endTime) total += remainingSeconds(m.endTime);\n    if (m.queue?.length) {\n      m.queue.forEach(q => {\n        total += (q.minutes || 50) * 60;\n      });\n    }\n    return total;\n  }\n\n  function remainingSecondsForUser(m, userId) {\n    let total = 0;\n\n    if (m.inUse && Number(m.currentUserId) === Number(userId)) {\n      return remainingSeconds(m.endTime);\n    }\n\n    if (m.inUse && m.endTime) {\n      total += remainingSeconds(m.endTime);\n    }\n\n    if (m.queue?.length) {\n      for (let q of m.queue) {\n        if (Number(q.userId) === Number(userId)) break;\n        total += (q.minutes || 50) * 60;\n      }\n    }\n\n    return total;\n  }\n\n  function getCurrentUserQueues() {\n    // If currentUserId doesn't exist in any machine data, return empty\n    const userExistsInMachines = machines.some(m =>\n      Number(m.currentUserId) === Number(currentUserId) ||\n      (m.queue && m.queue.some(q => Number(q.userId) === Number(currentUserId)))\n    );\n\n    if (!userExistsInMachines) {\n      return [];\n    }\n\n    const userQueues = machines.filter(m => {\n      const isCurrentUser = Number(m.currentUserId) === Number(currentUserId);\n      const isInQueue = m.queue && m.queue.some(q => Number(q.userId) === Number(currentUserId));\n      return isCurrentUser || isInQueue;\n    });\n    return userQueues;\n  }\n\n  async function joinQueue(machineId) {\n    const machine = machines.find(m => m.id === machineId);\n    if (!machine) return;\n\n    const userInAnyMachine = machines.some(mm =>\n      Number(mm.currentUserId) === Number(currentUserId) ||\n      (mm.queue && mm.queue.some(q => Number(q.userId) === Number(currentUserId)))\n    );\n\n    if (userInAnyMachine) {\n      alert(\"You are already using or queued for another machine.\");\n      return;\n    }\n\n    const minutesStr = prompt(\"Enter your wash duration (minutes):\", \"50\");\n    if (!minutesStr) return;\n    const minutes = parseInt(minutesStr, 10);\n    if (isNaN(minutes) || minutes <= 0) {\n      alert(\"Please enter a valid number of minutes.\");\n      return;\n    }\n\n    let totalWaitSec = 0;\n    if (machine.inUse && machine.endTime) totalWaitSec += remainingSeconds(machine.endTime);\n    machine.queue?.forEach(q => totalWaitSec += (q.minutes || 50) * 60);\n\n    const ok = window.confirm(\n      `Machine: ${machine.name}\\n` +\n      `Current queue: ${machine.queue?.length || 0} user(s)\\n` +\n      `Estimated wait: ${Math.ceil(totalWaitSec/60)} minutes\\n\\n` +\n      `Join queue?`\n    );\n    if (!ok) return;\n\n    try {\n      const res = await fetch(\"http://localhost:8080/api/machines/join\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ machineId, userId: currentUserId, minutes })\n      });\n      if (!res.ok) throw new Error('Failed to join queue');\n      const j = await res.json();\n      if (j.error) {\n        alert(j.error);\n      } else {\n        alert(`Joined queue. Position: ${j.position}. You will be notified 2 minutes before your turn.`);\n        fetchMachines();\n      }\n    } catch (error) {\n      console.error(\"Error joining queue:\", error);\n      alert(\"Failed to join queue. Please try again.\");\n    }\n  }\n\n  async function startWashing(machineId) {\n    const machine = machines.find(m => m.id === machineId);\n    if (!machine) return;\n\n    const minutesStr = prompt(\"Enter minutes for wash:\", \"50\");\n    if (!minutesStr) return;\n    const minutes = parseInt(minutesStr, 10);\n    if (isNaN(minutes) || minutes <= 0) {\n      alert(\"Please enter a valid number of minutes.\");\n      return;\n    }\n\n    try {\n      const res = await fetch(\"http://localhost:8080/api/machines/start\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ machineId, userId: currentUserId, minutes })\n      });\n      if (!res.ok) throw new Error('Failed to start washing');\n      const j = await res.json();\n      if (j.error) {\n        alert(j.error);\n      } else if (j.started) {\n        alert(\"Started: ends at \" + j.endTime);\n        fetchMachines();\n      }\n    } catch (error) {\n      console.error(\"Error starting wash:\", error);\n      alert(\"Failed to start washing. Please try again.\");\n    }\n  }\n\n  const currentUserQueues = getCurrentUserQueues();\n\n  return (\n    <div className=\"dashboard-wrapper\">\n      <div className=\"container\">\n        {/* Header */}\n        <div className=\"header-card\">\n          <div className=\"header\">\n            <div className=\"header-title\">\n              <span className=\"header-title-icon\">💧</span>\n              <h1>WashSimple</h1>\n            </div>\n            <div className=\"header-controls\">\n              <span className=\"header-controls-icon\">👤</span>\n              <select\n                className=\"user-select\"\n                value={currentUserId}\n                onChange={(e) => setCurrentUserId(Number(e.target.value))}\n              >\n                {users.map(u => (\n                  <option key={u.id} value={u.id}>{u.name}</option>\n                ))}\n              </select>\n              <button className=\"add-user-btn\" onClick={addNewUser}>\n                ➕ Add User\n              </button>\n            </div>\n          </div>\n\n          {/* Current User Status */}\n          {currentUserQueues.length > 0 ? (\n            <div className=\"active-sessions\">\n              <div className=\"active-sessions-label\">\n                <span className=\"active-sessions-label-icon\">🔔</span>\n                <strong>Your Active Sessions:</strong>\n              </div>\n              {currentUserQueues.map(m => {\n                const waitSec = remainingSecondsForUser(m, currentUserId);\n                const isWashing = Number(m.currentUserId) === Number(currentUserId) && m.inUse;\n                const queueIndex = m.queue?.findIndex(q => Number(q.userId) === Number(currentUserId));\n\n                return (\n                  <div\n                    key={m.id}\n                    className={isWashing ? \"session-card session-card-washing\" : \"session-card session-card-queued\"}\n                  >\n                    <strong>{m.name}</strong>\n                    <div className=\"session-card-details\">\n                      {isWashing ? (\n                        <>🔄 Washing • {fmtSeconds(waitSec)} left</>\n                      ) : (\n                        <>⏳ Position {queueIndex + 1} • ~{Math.ceil(waitSec / 60)} min wait</>\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"no-sessions\">\n              <span className=\"no-sessions-icon\">ℹ️</span>\n              <div className=\"no-sessions-text\">\n                You have no active sessions. Join a queue or start washing!\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Main Content */}\n        <div className=\"main-content\">\n          {/* Machines Grid */}\n          <div className=\"machine-grid\">\n            {machines.map(m => {\n              const totalSec = totalRemainingSecondsForMachine(m);\n              const occupied = totalSec > 0;\n              const isOwner = Number(m.currentUserId) === Number(currentUserId);\n              const userInAnyMachine = machines.some(mm =>\n                Number(mm.currentUserId) === Number(currentUserId) ||\n                (mm.queue && mm.queue.some(q => Number(q.userId) === Number(currentUserId)))\n              );\n\n              return (\n                <div key={m.id} className={isOwner ? \"card card-owner\" : \"card\"}>\n                  <h3>{m.name}</h3>\n\n                  <div className=\"card-details\">\n                    <div className=\"status-row\">\n                      <div className={occupied ? \"status-indicator status-indicator-occupied\" : \"status-indicator status-indicator-available\"} />\n                      <strong>{occupied ? \"Occupied\" : \"Available\"}</strong>\n                    </div>\n\n                    <div className=\"info-row\">\n                      <span className=\"info-icon\">⏰</span>\n                      <span>Remaining: <strong>{fmtSeconds(totalSec)}</strong></span>\n                    </div>\n\n                    <div className=\"info-row\">\n                      <span className=\"info-icon\">👥</span>\n                      <span>Queue: <strong>{m.queue?.length || 0}</strong></span>\n                    </div>\n                  </div>\n\n                  <div className=\"card-actions\">\n                    <button\n                      className=\"btn-join-queue\"\n                      onClick={() => joinQueue(m.id)}\n                      disabled={userInAnyMachine}\n                    >\n                      Join Queue\n                    </button>\n                    <button\n                      className=\"btn-start\"\n                      onClick={() => startWashing(m.id)}\n                      disabled={(!isOwner && userInAnyMachine) || (m.inUse && !isOwner)}\n                    >\n                      {isOwner ? \"Extend\" : \"Start\"}\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Right Panel - Queue Details */}\n          <div className=\"queue-panel\">\n            <h3>All Queues</h3>\n            {machines.length === 0 ? (\n              <div className=\"queue-empty\">\n                No machines available\n              </div>\n            ) : (\n              machines.map(m => (\n                <div key={m.id} className=\"queue-machine\">\n                  <strong>{m.name}</strong>\n                  {!m.inUse && (!m.queue || m.queue.length === 0) ? (\n                    <div className=\"queue-no-users\">\n                      No active users\n                    </div>\n                  ) : (\n                    <div className=\"queue-details\">\n                      {m.inUse && (\n                        <div className=\"queue-current-user\">\n                          🔄 {users.find(u => u.id === m.currentUserId)?.name || `User${m.currentUserId}`}\n                          <div className=\"queue-current-user-time\">\n                            {fmtSeconds(remainingSeconds(m.endTime))} remaining\n                          </div>\n                        </div>\n                      )}\n                      {m.queue?.map((q, idx) => (\n                        <div key={q.userId} className=\"queue-item\">\n                          #{idx + 1} {users.find(u => u.id === q.userId)?.name || `User${q.userId}`}\n                          <div className=\"queue-item-time\">\n                            {q.minutes} min\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}